<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> Proportional Symbol Charts in ggplot2 | Barry Meyo Z </title> <meta name="author" content="Barry Meyo Z"> <meta name="description" content="with background image"> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%E2%9A%9B%EF%B8%8F&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://haotianzhao99.github.io/projects/datanewsplot/"> <script src="/assets/js/theme.js?9a0c749ec5240d9cda97bc72359a72c0"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>initTheme();</script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span class="font-weight-bold">Barry</span> Meyo Z </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">home </a> </li> <li class="nav-item "> <a class="nav-link" href="/blog/">blog </a> </li> <li class="nav-item "> <a class="nav-link" href="/academicpapers/">academic papers </a> </li> <li class="nav-item active"> <a class="nav-link" href="/projects/">projects <span class="sr-only">(current)</span> </a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">cv </a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">Proportional Symbol Charts in ggplot2</h1> <p class="post-description">with background image</p> </header> <article> <p>The Proportional Symbol Chart offers a quick overview of data distribution by comparing the sizes of symbols. These symbols, typically circles or squares, are proportional in size to the values they represent. This visualization technique can be effectively combined with maps to illustrate geographical distributions, as well as showcase horizontal and vertical data distribution patterns.</p> <p>In a data journalism project, we aimed to analyze the distribution of policies related to Intangible Cultural Heritage (ICH) across various provinces in China. Our focus was on several aspects: identifying years when individual provinces concentrated on policy implementation, comparing policy enactment across provinces during the same period, and highlighting specific time points when multiple provinces simultaneously introduced numerous policies. For this purpose, we chose the Proportional Symbol Chart as our primary visualization strategy.</p> <p>Although modern visualization platforms like <a href="https://flourish.studio/" rel="external nofollow noopener" target="_blank">Flourish</a> can generate Proportional Symbol Charts with simple operations, we opted to use the ggplot2 package in R. This choice was motivated by ggplot2’s capacity to offer more refined control, allowing us to make flexible and precise adjustments to the visualization based on our specific requirements.</p> <h1 id="data-collection-and-cleaning">Data Collection and Cleaning</h1> <p>Policy data related to Intangible Cultural Heritage (ICH) was primarily sourced from the China Intangible Cultural Heritage Network. This website has compiled various national, ministerial, and local regulatory documents concerning ICH since 2000. We used web scraping techniques to collect these regulatory documents. Some of the entries are as follows: | Document Title | Year | | —- | —- | | Notice of the People’s Government of Tibet Autonomous Region on Announcing the Sixth Batch of Representative Projects of Intangible Cultural Heritage at the Autonomous Region Level | 2024 | | Notice of the People’s Government of Ningxia Hui Autonomous Region on Announcing the Seventh Batch of Representative Projects of Intangible Cultural Heritage at the Autonomous Region Level | 2024 | | Notice of Shanghai Municipal People’s Government on Announcing the Seventh Batch of Shanghai Municipal Intangible Cultural Heritage Representative Project List and the Extended Project List | 2024 | | … | …|</p> <p>After analyzing the data, we found that geographical information is typically contained within the first few characters of the document titles. By extracting the names of provinces, autonomous regions, or municipalities (or simply extracting the first two Chinese characters), we were able to create a streamlined dataset containing provinces and years: | Region | Year | | —- | —- | | Tibet | 2024 | | Ningxia | 2024 | | Shanghai | 2024 | | … | …|</p> <h1 id="visualization-with-ggplot2">Visualization with ggplot2</h1> <p>Firstly, we need to tally the number of regulatory documents enacted by each province every year.</p> <div class="language-markdown highlighter-rouge"><div class="highlight"><pre class="highlight"><code>library(readxl)
library(dplyr)
library(ggplot2)

data &lt;- read_xlsx("data.xlsx")
data <span class="nt">&lt;-</span> <span class="na">data</span> <span class="err">%</span><span class="nt">&gt;</span>%
  group_by(year, province) %&gt;%
  summarise(count = n(), .groups = 'drop')
</code></pre></div></div> <p>Therefore, we have generated data on the number of regulations enacted each year and by each province. Next, we can proceed to create a Proportional Symbol Chart.</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ggplot(datap, aes(x = date, y = province, size = count)) +
  geom_point() +
  theme_minimal() +
  labs(x = "Year", y = "Province")
</code></pre></div></div> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/project/project2/proplog1.png" sizes="95vw"></source> <img src="/assets/img/project/project2/proplog1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="proportional symbol chart" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <p>We can further enhance the appearance of the image by adjusting the parameters.</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>#Convert to a factor to adjust the size of the points
datap$count &lt;- as.factor(datap$count) 
datap$col &lt;- factor(datap$count, level = 1:9, ordered = TRUE)#Divide into 9 levels, one level for one regulation

plot &lt;- ggplot(datap, aes(x = year, y = province, size = col)) +
  geom_point(color = "#87481f", alpha = 0.5) +  # Set the color of all points to the specified color.
  theme_minimal() +
  theme(
    axis.text.x = element_text(angle = 45, hjust = 1),     #Adjust the angle of the x-axis labels.
    panel.background = element_blank(),  # Remove the background color.
    panel.grid.major.y = element_line(color = "#faf5f0"),  # Change the color of the major horizontal grid lines.
    panel.grid.minor.y = element_line(color = "#faf5f0"),  # Change the color of the minor horizontal grid lines.
    panel.grid.major.x = element_blank(),  # Remove the major vertical grid lines.
    panel.grid.minor.x = element_blank()   # Remove the minor vertical grid lines.
  ) +
  scale_size_manual(values = c(3, 3.5, 5, 6, 7, 8, 10, 12)) +
  labs(x = " ", y = " ", title = " ") +
  guides(size = guide_legend(title = " "))

print(plot)
</code></pre></div></div> <p>Finally, the plotted image looks as follows.</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/project/project2/proplog2.png" sizes="95vw"></source> <img src="/assets/img/project/project2/proplog2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="proportional symbol chart" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> </article> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2024 Barry Meyo Z. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. Photos from <a href="https://unsplash.com" target="_blank" rel="external nofollow noopener">Unsplash</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?e0514a05c5c95ac1a93a8dfd5249b92e"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>addBackToTop();</script> </body> </html>